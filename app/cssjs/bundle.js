!function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[a]={exports:{}};e[a][0].call(f.exports,function(t){var r=e[a][1][t];return o(r?r:t)},f,f.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t){"use strict";function e(){document.body.classList.remove("loading"),document.getElementById("citynameintitle").textContent=g[E],k.textContent=C.features.length.toLocaleString()+" total crimes",S.addSource("crimes",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),S.addSource("geojson",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),S.addLayer({id:"polygon-query-fill",type:"fill",source:"geojson",paint:{"fill-color":"#027dbd","fill-opacity":.05}},"place_label_neighborhood"),S.addLayer({id:"polygon-query-line",type:"line",source:"geojson",paint:{"line-color":"#027dbd","line-join":"round","line-width":2}},"place_label_neighborhood"),U.forEach(function(t,e){S.addLayer({id:"crime-markers-"+e,type:"circle",source:"crimes",interactive:!0,paint:{"circle-color":t[1],"circle-radius":t[2],"circle-opacity":.75},filter:["==",t[0],!0]},"place_label_neighborhood")}),P.setAttribute("width",S.getCanvas().offsetWidth),P.setAttribute("height",S.getCanvas().offsetHeight),T=document.createElement("button"),T.id="draw",T.className="icon pencil button round-right draw-ctrl",T.title="Draw",T.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),T.classList.contains("active")?n():(T.classList.add("active"),P.classList.remove("hidden"),P.style.cursor="crosshair",N.enable())}),M.appendChild(T),N.on("result",function(t){var e={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}};t.result.forEach(function(t){var r=S.unproject(t);e.geometry.coordinates[0].push([r.lng,r.lat])}),e.geometry.coordinates[0].push(e.geometry.coordinates[0][0]),e=s(e,1e-4,!0),h=e,r(e),n()}),o()}function r(t){var e={type:"FeatureCollection",features:t?[t]:[]};S.getSource("geojson").setData(e);var n=t?c(C,e):e;if(l(n.features,function(t){var e=new Date(t.properties.timestamp);return e.getUTCHours()<d||e.getUTCHours()>v}),S.getSource("crimes").setData(n),A.innerHTML="",n.features.length){var o=document.createElement("strong");o.className="block space-bottom1",o.textContent=n.features.length.toLocaleString()+" crimes selected",A.appendChild(o);var i=[{label:"Crime class",aggregate:f(n.features,function(t){return 1==t.properties.CDSDV?"Domestic Violence":1==t.properties.CDSNV?"Non-Violent":1==t.properties.CDSSTREET?"STREET CRIME":"UNKNOWN"})},{label:"Jurisdictional classification",aggregate:f(n.features,function(t){return t.properties.desc?t.properties.desc:"UNKNOWN"})}],a=0;i.forEach(function(t){var e=document.createElement("strong");e.className="block space-bottom0 quiet small strong",e.textContent=t.label;var r=document.createElement("div");r.className="clearfix col12 space-bottom1 dark contain";var o=0;for(var i in t.aggregate)try{var u=document.createElement("div");u.className="fl bar fill-blue pad0y";var s=t.aggregate[i].length/n.features.length*100;s=1>s?s.toFixed(1):Math.floor(s),u.style.width=s+"%",u.style.backgroundColor=0==a&&o<=U.length?U[o][1]:"#"+Math.floor(16777215*Math.random()).toString(16);var c=i+" ("+s+"%)";u.setAttribute("data-tooltip",c.toLowerCase()),r.appendChild(u)}catch(f){console.log(f.stack),console.log("PROP: "+i)}finally{o++}a++,A.appendChild(r),A.appendChild(e),A.appendChild(document.createElement("p"))})}else A.appendChild(k);t&&!D&&(D=document.createElement("button"),D.className="dark button round-left pad2x draw-ctrl keyline-right",D.textContent="Clear selection",D.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),r()}),M.insertBefore(D,T)),!t&&D&&(M.removeChild(D),D=null),O.classList.toggle("hidden",!t)}function n(){T&&(T.classList.remove("active"),P.classList.add("hidden"),P.style.cursor="",N.disable().clear())}function o(){var t=document.createElement("h4");t.className="block space-bottom0",t.textContent="Crime type";var e=document.createElement("div"),r=document.createElement("ul");e.appendChild(r),U.forEach(function(t){var e=document.createElement("li"),n=document.createElement("span");n.className="inline dot",n.style.backgroundColor=t[1],n.style.width="12px",n.style.height="12px",e.appendChild(n);var o=document.createElement("span");o.textContent=" "+t[3],e.appendChild(o),r.appendChild(e)}),O.appendChild(t),O.appendChild(e)}function i(t){for(var e=window.location.search.substring(1),r=e.split("&"),n=0;n<r.length;n++){var o=r[n].split("=");if(o[0]==t)return o[1]}return!1}function a(){var t=document.getElementById("city_"+_[E]);void 0===!t&&null!=t&&(t.selected=!0);var r="http://opendata.mybluemix.net/crimes?bbox="+b[E].toString(),n=new Date;n.setDate(n.getDate()-m[E]),r+="&time="+n.valueOf(),console.log("Getting data: "+r),u.get({url:r,json:!0},function(t,r){if(t)throw t;C=r.body,C.features.length<100&&alert(C.features.length<1?"No crimes found! Either this area is amazingly safe or an error has occurred.":"Only "+C.features.length+" crimes found"),e()})}mapboxgl.accessToken="pk.eyJ1IjoicmFqcnNpbmdoIiwiYSI6ImpzeDhXbk0ifQ.VeSXCxcobmgfLgJAnsK3nw";var u=t("browser-request"),s=t("turf-simplify"),c=t("turf-within"),f=t("lodash.groupby"),l=t("lodash.remove"),p=(t("rainbow"),t("pencil")),h=null,d=0,v=24,y=document.getElementById("timeslider");noUiSlider.create(y,{start:[0,24],step:1,connect:!0,range:{min:0,max:24},format:{to:function(t){return Math.floor(t)},from:function(t){return Math.floor(t)}},pips:{mode:"steps",filter:function(t){return t%6?0:1}}}),y.noUiSlider.on("update",function(){d=y.noUiSlider.get()[0],v=y.noUiSlider.get()[1],h&&r(h)});var _=["vegas","boston","sf","chicago","test"],g=["Las Vegas","Boston","San Francisco","Chicago","Test"],m=[14,14,28,28,7],b=[[-115.2,35.883,-114.79,36.356],[-71.192,42.228,-70.985,42.396],[-122.525,37.7,-122.348,37.816],[-87.876,41.774,-87.587,41.953],[-71.073,42.353,-70.973,42.453]],w=[[-115.1427,36.1637],[-71.073,42.353],[-122.421,37.781],[-87.637,41.897],[-71.073,42.353]],x="vegas",E=0,j=i("city");j&&_.indexOf(j)&&(E=_.indexOf(j),x=j);var C={},S=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v8",center:w[E],zoom:12.75,minZoom:12});-1!==window.location.search.indexOf("embed")&&S.scrollZoom.disable();var L=new mapboxgl.Popup({closeButton:!1}),O=document.getElementById("legend"),A=document.getElementById("aggregates"),k=document.createElement("strong");A.appendChild(k);var T,D,M=document.getElementById("draw-controls"),P=document.getElementById("canvas"),N=new p(P),U=[["CDSSTREET","#FF0000",6,"Street crime"],["CDSNV","#0000FF",4,"Non-Violent"],["CDSDV","#00FF00",5,"Domestic"]];S.on("mousemove",function(t){S.featuresAt(t.point,{radius:2.5,includeGeometry:!0,layer:U.map(function(t,e){return"crime-markers-"+e})},function(t,e){return S.getCanvas().style.cursor=!t&&e.length?"pointer":"",t||!e.length?void L.remove():void 0})}),S.on("load",a)},{"browser-request":2,"lodash.groupby":3,"lodash.remove":4,pencil:5,rainbow:6,"turf-simplify":10,"turf-within":11}],2:[function(t,e,r){!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof r?e.exports=n():t.returnExports=n()}(this,function(){function t(o,i){if("function"!=typeof i)throw new Error("Bad callback given: "+i);if(!o)throw new Error("No options given");var u=o.onResponse;if(o="string"==typeof o?{uri:o}:JSON.parse(JSON.stringify(o)),o.onResponse=u,o.verbose&&(t.log=n()),o.url&&(o.uri=o.url,delete o.url),!o.uri&&""!==o.uri)throw new Error("options.uri is a required argument");if("string"!=typeof o.uri)throw new Error("options.uri must be a string");for(var s=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<s.length;c++)if(o[s[c]])throw new Error("options."+s[c]+" is not supported");if(o.callback=i,o.method=o.method||"GET",o.headers=o.headers||{},o.body=o.body||null,o.timeout=o.timeout||t.DEFAULT_TIMEOUT,o.headers.host)throw new Error("Options.headers.host is not supported");o.json&&(o.headers.accept=o.headers.accept||"application/json","GET"!==o.method&&(o.headers["content-type"]="application/json"),"boolean"!=typeof o.json?o.body=JSON.stringify(o.json):"string"!=typeof o.body&&(o.body=JSON.stringify(o.body)));var f=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")};if(o.qs){var l="string"==typeof o.qs?o.qs:f(o.qs);o.uri=-1!==o.uri.indexOf("?")?o.uri+"&"+l:o.uri+"?"+l}var p=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+n+'"\n\n'+t[n]+"\n");return r.push("--"+e.boundry+"--"),e.body=r.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e};if(o.form){if("string"==typeof o.form)throw"form name unsupported";if("POST"===o.method){var h=(o.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(o.headers["content-type"]=h,h){case"application/x-www-form-urlencoded":o.body=f(o.form).replace(/%20/g,"+");break;case"multipart/form-data":var d=p(o.form);o.body=d.body,o.headers["content-type"]=d.type;break;default:throw new Error("unsupported encoding:"+h)}}}return o.onResponse=o.onResponse||r,o.onResponse===!0&&(o.onResponse=i,o.callback=r),!o.headers.authorization&&o.auth&&(o.headers.authorization="Basic "+a(o.auth.username+":"+o.auth.password)),e(o)}function e(e){function r(){l=!0;var r=new Error("ETIMEDOUT");return r.code="ETIMEDOUT",r.duration=e.timeout,t.log.error("Timeout",{id:f._id,milliseconds:e.timeout}),e.callback(r,f)}function n(){if(l)return t.log.debug("Ignoring timed out state change",{state:f.readyState,id:f.id});if(t.log.debug("State change",{state:f.readyState,id:f.id,timed_out:l}),f.readyState===u.OPENED){t.log.debug("Request started",{id:f.id});for(var r in e.headers)f.setRequestHeader(r,e.headers[r])}else f.readyState===u.HEADERS_RECEIVED?o():f.readyState===u.LOADING?(o(),a()):f.readyState===u.DONE&&(o(),a(),s())}function o(){if(!v.response){if(v.response=!0,t.log.debug("Got response",{id:f.id,status:f.status}),clearTimeout(f.timeoutTimer),f.statusCode=f.status,p&&0==f.statusCode){var r=new Error("CORS request rejected: "+e.uri);return r.cors="rejected",v.loading=!0,v.end=!0,e.callback(r,f)}e.onResponse(null,f)}}function a(){v.loading||(v.loading=!0,t.log.debug("Response body loading",{id:f.id}))}function s(){if(!v.end){if(v.end=!0,t.log.debug("Request done",{id:f.id}),f.body=f.responseText,e.json)try{f.body=JSON.parse(f.responseText)}catch(r){return e.callback(r,f)}e.callback(null,f,f.body)}}var f=new u,l=!1,p=i(e.uri),h="withCredentials"in f;if(c+=1,f.seq_id=c,f.id=c+": "+e.method+" "+e.uri,f._id=f.id,p&&!h){var d=new Error("Browser does not support cross-origin request: "+e.uri);return d.cors="unsupported",e.callback(d,f)}f.timeoutTimer=setTimeout(r,e.timeout);var v={response:!1,loading:!1,end:!1};return f.onreadystatechange=n,f.open(e.method,e.uri,!0),p&&(f.withCredentials=!!e.withCredentials),f.send(e.body),f}function r(){}function n(){var t,e,n={},i=["trace","debug","info","warn","error"];for(e=0;e<i.length;e++)t=i[e],n[t]=r,"undefined"!=typeof console&&console&&console[t]&&(n[t]=o(console,t));return n}function o(t,e){function r(r,n){return"object"==typeof n&&(r+=" "+JSON.stringify(n)),t[e].call(t,r)}return r}function i(t){var e,r=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(n){e=document.createElement("a"),e.href="",e=e.href}var o=r.exec(e.toLowerCase())||[],i=r.exec(t.toLowerCase()),a=!(!i||i[1]==o[1]&&i[2]==o[2]&&(i[3]||("http:"===i[1]?80:443))==(o[3]||("http:"===o[1]?80:443)));return a}function a(t){var e,r,n,o,i,a,u,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,l=0,p="",h=[];if(!t)return t;do e=t.charCodeAt(f++),r=t.charCodeAt(f++),n=t.charCodeAt(f++),s=e<<16|r<<8|n,o=s>>18&63,i=s>>12&63,a=s>>6&63,u=63&s,h[l++]=c.charAt(o)+c.charAt(i)+c.charAt(a)+c.charAt(u);while(f<t.length);switch(p=h.join(""),t.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p}var u=XMLHttpRequest;if(!u)throw new Error("missing XMLHttpRequest");t.log={trace:r,debug:r,info:r,warn:r,error:r};var s=18e4,c=0;t.withCredentials=!1,t.DEFAULT_TIMEOUT=s,t.defaults=function(e){var r=function(t){var r=function(r,n){r="string"==typeof r?{uri:r}:JSON.parse(JSON.stringify(r));for(var o in e)void 0===r[o]&&(r[o]=e[o]);return t(r,n)};return r},n=r(t);return n.get=r(t.get),n.post=r(t.post),n.put=r(t.put),n.head=r(t.head),n};var f=["get","put","post","head"];return f.forEach(function(e){var r=e.toUpperCase(),n=e.toLowerCase();t[n]=function(e){"string"==typeof e?e={method:r,uri:e}:(e=JSON.parse(JSON.stringify(e)),e.method=r);var n=[e].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,n)}}),t.couch=function(e,n){function o(t,e,r){if(t)return n(t,e,r);if((e.statusCode<200||e.statusCode>299)&&r.error){t=new Error("CouchDB error: "+(r.error.reason||r.error.error));for(var o in r)t[o]=r[o];return n(t,e,r)}return n(t,e,r)}"string"==typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,n=n||r;var i=t(e,o);return i},t})},{}],3:[function(t,e,r){(function(t){function n(t,e,r,n){for(var o=-1,i=t?t.length:0;++o<i;){var a=t[o];e(n,a,r(a),t)}return n}function o(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function i(t){return function(e){return null==e?void 0:e[t]}}function a(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function u(t){return function(e){return t(e)}}function s(t,e){return null==t?void 0:t[e]}function c(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function l(t,e){return function(r){return t(e(r))}}function p(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function h(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function d(){this.__data__=nr?nr(null):{}}function v(t){return this.has(t)&&delete this.__data__[t]}function y(t){var e=this.__data__;if(nr){var r=e[t];return r===Bt?void 0:r}return Ve.call(e,t)?e[t]:void 0}function _(t){var e=this.__data__;return nr?void 0!==e[t]:Ve.call(e,t)}function g(t,e){var r=this.__data__;return r[t]=nr&&void 0===e?Bt:e,this}function m(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__=[]}function w(t){var e=this.__data__,r=q(e,t);if(0>r)return!1;var n=e.length-1;return r==n?e.pop():Xe.call(e,r,1),!0}function x(t){var e=this.__data__,r=q(e,t);return 0>r?void 0:e[r][1]}function E(t){return q(this.__data__,t)>-1}function j(t,e){var r=this.__data__,n=q(r,t);return 0>n?r.push([t,e]):r[n][1]=e,this}function C(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function S(){this.__data__={hash:new h,map:new(Qe||m),string:new h}}function L(t){return lt(this,t)["delete"](t)}function O(t){return lt(this,t).get(t)}function A(t){return lt(this,t).has(t)}function k(t,e){return lt(this,t).set(t,e),this}function T(t){var e=-1,r=t?t.length:0;for(this.__data__=new C;++e<r;)this.add(t[e])}function D(t){return this.__data__.set(t,Bt),this}function M(t){return this.__data__.has(t)}function P(t){this.__data__=new m(t)}function N(){this.__data__=new m}function U(t){return this.__data__["delete"](t)}function R(t){return this.__data__.get(t)}function F(t){return this.__data__.has(t)}function I(t,e){var r=this.__data__;if(r instanceof m){var n=r.__data__;if(!Qe||n.length<zt-1)return n.push([t,e]),this;r=this.__data__=new C(n)}return r.set(t,e),this}function z(t,e){var r=_r(t)||St(t)?a(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!Ve.call(t,i)||o&&("length"==i||vt(i,n))||r.push(i);return r}function q(t,e){for(var r=t.length;r--;)if(Ct(t[r][0],e))return r;return-1}function B(t,e,r,n){return pr(t,function(t,o,i){e(n,t,r(t),i)}),n}function $(t,e){return t&&hr(t,e,Rt)}function V(t,e){e=yt(e,t)?[e]:ot(e);for(var r=0,n=e.length;null!=t&&n>r;)t=t[xt(e[r++])];return r&&r==n?t:void 0}function J(t){return Je.call(t)}function H(t,e){return null!=t&&e in Object(t)}function G(t,e,r,n,o){return t===e?!0:null==t||null==e||!Tt(t)&&!Dt(e)?t!==t&&e!==e:W(t,e,G,r,n,o)}function W(t,e,r,n,o,i){var a=_r(t),u=_r(e),s=Wt,f=Wt;a||(s=dr(t),s=s==Gt?re:s),u||(f=dr(e),f=f==Gt?re:f);var l=s==re&&!c(t),p=f==re&&!c(e),h=s==f;if(h&&!l)return i||(i=new P),a||gr(t)?st(t,e,r,n,o,i):ct(t,e,s,r,n,o,i);if(!(o&Vt)){var d=l&&Ve.call(t,"__wrapped__"),v=p&&Ve.call(e,"__wrapped__");if(d||v){var y=d?t.value():t,_=v?e.value():e;return i||(i=new P),r(y,_,n,o,i)}}return h?(i||(i=new P),ft(t,e,r,n,o,i)):!1}function K(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){u=r[o];var s=u[0],c=t[s],f=u[1];if(a&&u[2]){if(void 0===c&&!(s in t))return!1}else{var l=new P;if(n)var p=n(c,f,s,t,e,l);if(!(void 0===p?G(f,c,n,$t|Vt,l):p))return!1}}return!0}function X(t){if(!Tt(t)||gt(t))return!1;var e=At(t)||c(t)?He:Se;return e.test(Et(t))}function Y(t){return Dt(t)&&kt(t.length)&&!!Oe[Je.call(t)]}function Z(t){return"function"==typeof t?t:null==t?Ft:"object"==typeof t?_r(t)?et(t[0],t[1]):tt(t):It(t)}function Q(t){if(!mt(t))return Ye(t);var e=[];for(var r in Object(t))Ve.call(t,r)&&"constructor"!=r&&e.push(r);return e}function tt(t){var e=pt(t);return 1==e.length&&e[0][2]?wt(e[0][0],e[0][1]):function(r){return r===t||K(r,t,e)}}function et(t,e){return yt(t)&&bt(e)?wt(xt(t),e):function(r){var n=Nt(r,t);return void 0===n&&n===e?Ut(r,t):G(e,n,void 0,$t|Vt)}}function rt(t){return function(e){return V(e,t)}}function nt(t){if("string"==typeof t)return t;if(Mt(t))return lr?lr.call(t):"";var e=t+"";return"0"==e&&1/t==-Jt?"-0":e}function ot(t){return _r(t)?t:vr(t)}function it(t,e){return function(r,o){var i=_r(r)?n:B,a=e?e():{};return i(r,t,Z(o,2),a)}}function at(t,e){return function(r,n){if(null==r)return r;if(!Lt(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&n(a[i],i,a)!==!1;);return r}}function ut(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),u=a.length;u--;){var s=a[t?u:++o];if(r(i[s],s,i)===!1)break}return e}}function st(t,e,r,n,i,a){var u=i&Vt,s=t.length,c=e.length;if(s!=c&&!(u&&c>s))return!1;var f=a.get(t);if(f&&a.get(e))return f==e;var l=-1,p=!0,h=i&$t?new T:void 0;for(a.set(t,e),a.set(e,t);++l<s;){var d=t[l],v=e[l];if(n)var y=u?n(v,d,l,e,t,a):n(d,v,l,t,e,a);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!o(e,function(t,e){return h.has(e)||d!==t&&!r(d,t,n,i,a)?void 0:h.add(e)})){p=!1;break}}else if(d!==v&&!r(d,v,n,i,a)){p=!1;break}}return a["delete"](t),a["delete"](e),p}function ct(t,e,r,n,o,i,a){switch(r){case fe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ce:return t.byteLength==e.byteLength&&n(new We(t),new We(e))?!0:!1;case Kt:case Xt:case ee:return Ct(+t,+e);case Yt:return t.name==e.name&&t.message==e.message;case oe:case ae:return t==e+"";case te:var u=f;case ie:var s=i&Vt;if(u||(u=p),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;i|=$t,a.set(t,e);var l=st(u(t),u(e),n,o,i,a);return a["delete"](t),l;case ue:if(fr)return fr.call(t)==fr.call(e)}return!1}function ft(t,e,r,n,o,i){var a=o&Vt,u=Rt(t),s=u.length,c=Rt(e),f=c.length;if(s!=f&&!a)return!1;for(var l=s;l--;){var p=u[l];if(!(a?p in e:Ve.call(e,p)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var d=!0;i.set(t,e),i.set(e,t);for(var v=a;++l<s;){p=u[l];var y=t[p],_=e[p];if(n)var g=a?n(_,y,p,e,t,i):n(y,_,p,t,e,i);if(!(void 0===g?y===_||r(y,_,n,o,i):g)){d=!1;break}v||(v="constructor"==p)}if(d&&!v){var m=t.constructor,b=e.constructor;m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(d=!1)}return i["delete"](t),i["delete"](e),d}function lt(t,e){var r=t.__data__;return _t(e)?r["string"==typeof e?"string":"hash"]:r.map}function pt(t){for(var e=Rt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,bt(o)]}return e}function ht(t,e){var r=s(t,e);return X(r)?r:void 0}function dt(t,e,r){e=yt(e,t)?[e]:ot(e);for(var n,o=-1,i=e.length;++o<i;){var a=xt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;var i=t?t.length:0;return!!i&&kt(i)&&vt(a,i)&&(_r(t)||St(t))}function vt(t,e){return e=null==e?Ht:e,!!e&&("number"==typeof t||Le.test(t))&&t>-1&&t%1==0&&e>t}function yt(t,e){if(_r(t))return!1;var r=typeof t;return"number"==r||"symbol"==r||"boolean"==r||null==t||Mt(t)?!0:we.test(t)||!be.test(t)||null!=e&&t in Object(e)}function _t(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function gt(t){return!!Be&&Be in t}function mt(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||ze;return t===r}function bt(t){return t===t&&!Tt(t)}function wt(t,e){return function(r){return null==r?!1:r[t]===e&&(void 0!==e||t in Object(r))}}function xt(t){if("string"==typeof t||Mt(t))return t;var e=t+"";return"0"==e&&1/t==-Jt?"-0":e}function Et(t){if(null!=t){try{return $e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function jt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(qt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(jt.Cache||C),r}function Ct(t,e){return t===e||t!==t&&e!==e}function St(t){return Ot(t)&&Ve.call(t,"callee")&&(!Ke.call(t,"callee")||Je.call(t)==Gt)}function Lt(t){return null!=t&&kt(t.length)&&!At(t)}function Ot(t){return Dt(t)&&Lt(t)}function At(t){var e=Tt(t)?Je.call(t):"";return e==Zt||e==Qt}function kt(t){return"number"==typeof t&&t>-1&&t%1==0&&Ht>=t}function Tt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Dt(t){return!!t&&"object"==typeof t}function Mt(t){return"symbol"==typeof t||Dt(t)&&Je.call(t)==ue}function Pt(t){return null==t?"":nt(t)}function Nt(t,e,r){var n=null==t?void 0:V(t,e);return void 0===n?r:n}function Ut(t,e){return null!=t&&dt(t,e,H)}function Rt(t){return Lt(t)?z(t):Q(t)}function Ft(t){return t}function It(t){return yt(t)?i(xt(t)):rt(t)}var zt=200,qt="Expected a function",Bt="__lodash_hash_undefined__",$t=1,Vt=2,Jt=1/0,Ht=9007199254740991,Gt="[object Arguments]",Wt="[object Array]",Kt="[object Boolean]",Xt="[object Date]",Yt="[object Error]",Zt="[object Function]",Qt="[object GeneratorFunction]",te="[object Map]",ee="[object Number]",re="[object Object]",ne="[object Promise]",oe="[object RegExp]",ie="[object Set]",ae="[object String]",ue="[object Symbol]",se="[object WeakMap]",ce="[object ArrayBuffer]",fe="[object DataView]",le="[object Float32Array]",pe="[object Float64Array]",he="[object Int8Array]",de="[object Int16Array]",ve="[object Int32Array]",ye="[object Uint8Array]",_e="[object Uint8ClampedArray]",ge="[object Uint16Array]",me="[object Uint32Array]",be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,we=/^\w*$/,xe=/^\./,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,je=/[\\^$.*+?()[\]{}|]/g,Ce=/\\(\\)?/g,Se=/^\[object .+?Constructor\]$/,Le=/^(?:0|[1-9]\d*)$/,Oe={};Oe[le]=Oe[pe]=Oe[he]=Oe[de]=Oe[ve]=Oe[ye]=Oe[_e]=Oe[ge]=Oe[me]=!0,Oe[Gt]=Oe[Wt]=Oe[ce]=Oe[Kt]=Oe[fe]=Oe[Xt]=Oe[Yt]=Oe[Zt]=Oe[te]=Oe[ee]=Oe[re]=Oe[oe]=Oe[ie]=Oe[ae]=Oe[se]=!1;var Ae="object"==typeof t&&t&&t.Object===Object&&t,ke="object"==typeof self&&self&&self.Object===Object&&self,Te=Ae||ke||Function("return this")(),De="object"==typeof r&&r&&!r.nodeType&&r,Me=De&&"object"==typeof e&&e&&!e.nodeType&&e,Pe=Me&&Me.exports===De,Ne=Pe&&Ae.process,Ue=function(){try{return Ne&&Ne.binding("util")}catch(t){}}(),Re=Ue&&Ue.isTypedArray,Fe=Array.prototype,Ie=Function.prototype,ze=Object.prototype,qe=Te["__core-js_shared__"],Be=function(){var t=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),$e=Ie.toString,Ve=ze.hasOwnProperty,Je=ze.toString,He=RegExp("^"+$e.call(Ve).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=Te.Symbol,We=Te.Uint8Array,Ke=ze.propertyIsEnumerable,Xe=Fe.splice,Ye=l(Object.keys,Object),Ze=ht(Te,"DataView"),Qe=ht(Te,"Map"),tr=ht(Te,"Promise"),er=ht(Te,"Set"),rr=ht(Te,"WeakMap"),nr=ht(Object,"create"),or=Et(Ze),ir=Et(Qe),ar=Et(tr),ur=Et(er),sr=Et(rr),cr=Ge?Ge.prototype:void 0,fr=cr?cr.valueOf:void 0,lr=cr?cr.toString:void 0;h.prototype.clear=d,h.prototype["delete"]=v,h.prototype.get=y,h.prototype.has=_,h.prototype.set=g,m.prototype.clear=b,m.prototype["delete"]=w,m.prototype.get=x,m.prototype.has=E,m.prototype.set=j,C.prototype.clear=S,C.prototype["delete"]=L,C.prototype.get=O,C.prototype.has=A,C.prototype.set=k,T.prototype.add=T.prototype.push=D,T.prototype.has=M,P.prototype.clear=N,P.prototype["delete"]=U,P.prototype.get=R,P.prototype.has=F,P.prototype.set=I;var pr=at($),hr=ut(),dr=J;(Ze&&dr(new Ze(new ArrayBuffer(1)))!=fe||Qe&&dr(new Qe)!=te||tr&&dr(tr.resolve())!=ne||er&&dr(new er)!=ie||rr&&dr(new rr)!=se)&&(dr=function(t){var e=Je.call(t),r=e==re?t.constructor:void 0,n=r?Et(r):void 0;if(n)switch(n){case or:return fe;case ir:return te;case ar:return ne;case ur:return ie;case sr:return se}return e});var vr=jt(function(t){t=Pt(t);var e=[];return xe.test(t)&&e.push(""),t.replace(Ee,function(t,r,n,o){e.push(n?o.replace(Ce,"$1"):r||t)}),e}),yr=it(function(t,e,r){Ve.call(t,r)?t[r].push(e):t[r]=[e]});jt.Cache=C;var _r=Array.isArray,gr=Re?u(Re):Y;e.exports=yr}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,r){(function(t){function n(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function o(t){return function(e){return null==e?void 0:e[t]}}function i(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function a(t){return function(e){return t(e)}}function u(t,e){return null==t?void 0:t[e]}function s(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function c(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function f(t,e){return function(r){return t(e(r))}}function l(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function p(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(){this.__data__=rr?rr(null):{}}function d(t){return this.has(t)&&delete this.__data__[t]}function v(t){var e=this.__data__;if(rr){var r=e[t];return r===qt?void 0:r}return $e.call(e,t)?e[t]:void 0}function y(t){var e=this.__data__;return rr?void 0!==e[t]:$e.call(e,t)}function _(t,e){var r=this.__data__;return r[t]=rr&&void 0===e?qt:e,this}function g(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function m(){this.__data__=[]}function b(t){var e=this.__data__,r=z(e,t);if(0>r)return!1;var n=e.length-1;return r==n?e.pop():Ke.call(e,r,1),!0}function w(t){var e=this.__data__,r=z(e,t);return 0>r?void 0:e[r][1]}function x(t){return z(this.__data__,t)>-1}function E(t,e){var r=this.__data__,n=z(r,t);return 0>n?r.push([t,e]):r[n][1]=e,this}function j(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function C(){this.__data__={hash:new p,map:new(Ze||g),string:new p}}function S(t){return ut(this,t)["delete"](t)}function L(t){return ut(this,t).get(t)}function O(t){return ut(this,t).has(t)}function A(t,e){return ut(this,t).set(t,e),this}function k(t){var e=-1,r=t?t.length:0;for(this.__data__=new j;++e<r;)this.add(t[e])}function T(t){return this.__data__.set(t,qt),this}function D(t){return this.__data__.has(t)}function M(t){this.__data__=new g(t)}function P(){this.__data__=new g}function N(t){return this.__data__["delete"](t)}function U(t){return this.__data__.get(t)}function R(t){return this.__data__.has(t)}function F(t,e){var r=this.__data__;if(r instanceof g){var n=r.__data__;if(!Ze||n.length<It-1)return n.push([t,e]),this;r=this.__data__=new j(n)}return r.set(t,e),this}function I(t,e){var r=hr(t)||Ct(t)?i(t.length,String):[],n=r.length,o=!!n;for(var a in t)!e&&!$e.call(t,a)||o&&("length"==a||lt(a,n))||r.push(a);return r}function z(t,e){for(var r=t.length;r--;)if(jt(t[r][0],e))return r;return-1}function q(t,e){e=pt(e,t)?[e]:nt(e);for(var r=0,n=e.length;null!=t&&n>r;)t=t[mt(e[r++])];return r&&r==n?t:void 0}function B(t){return Ve.call(t)}function $(t,e){return null!=t&&e in Object(t)}function V(t,e,r,n,o){return t===e?!0:null==t||null==e||!kt(t)&&!Tt(e)?t!==t&&e!==e:J(t,e,V,r,n,o)}function J(t,e,r,n,o,i){var a=hr(t),u=hr(e),c=Gt,f=Gt;a||(c=lr(t),c=c==Ht?ee:c),u||(f=lr(e),f=f==Ht?ee:f);var l=c==ee&&!s(t),p=f==ee&&!s(e),h=c==f;if(h&&!l)return i||(i=new M),a||dr(t)?ot(t,e,r,n,o,i):it(t,e,c,r,n,o,i);if(!(o&$t)){var d=l&&$e.call(t,"__wrapped__"),v=p&&$e.call(e,"__wrapped__");if(d||v){var y=d?t.value():t,_=v?e.value():e;return i||(i=new M),r(y,_,n,o,i)}}return h?(i||(i=new M),at(t,e,r,n,o,i)):!1}function H(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){u=r[o];var s=u[0],c=t[s],f=u[1];if(a&&u[2]){if(void 0===c&&!(s in t))return!1}else{var l=new M;if(n)var p=n(c,f,s,t,e,l);if(!(void 0===p?V(f,c,n,Bt|$t,l):p))return!1}}return!0}function G(t){if(!kt(t)||dt(t))return!1;var e=Ot(t)||s(t)?Je:Ce;return e.test(bt(t))}function W(t){return Tt(t)&&At(t.length)&&!!Le[Ve.call(t)]}function K(t){return"function"==typeof t?t:null==t?Rt:"object"==typeof t?hr(t)?Z(t[0],t[1]):Y(t):Ft(t)}function X(t){if(!vt(t))return Xe(t);var e=[];for(var r in Object(t))$e.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Y(t){var e=st(t);return 1==e.length&&e[0][2]?_t(e[0][0],e[0][1]):function(r){return r===t||H(r,t,e)}}function Z(t,e){return pt(t)&&yt(e)?_t(mt(t),e):function(r){var n=Pt(r,t);return void 0===n&&n===e?Nt(r,t):V(e,n,void 0,Bt|$t)}}function Q(t){return function(e){return q(e,t)}}function tt(t,e){for(var r=t?e.length:0,n=r-1;r--;){var o=e[r];if(r==n||o!==i){var i=o;if(lt(o))Ke.call(t,o,1);else if(pt(o,t))delete t[mt(o)];else{var a=nt(o),u=gt(t,a);null!=u&&delete u[mt(wt(a))]}}}return t}function et(t,e,r){var n=-1,o=t.length;0>e&&(e=-e>o?0:o+e),r=r>o?o:r,0>r&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}function rt(t){if("string"==typeof t)return t;if(Dt(t))return fr?fr.call(t):"";var e=t+"";return"0"==e&&1/t==-Vt?"-0":e}function nt(t){return hr(t)?t:pr(t)}function ot(t,e,r,o,i,a){var u=i&$t,s=t.length,c=e.length;if(s!=c&&!(u&&c>s))return!1;var f=a.get(t);if(f&&a.get(e))return f==e;var l=-1,p=!0,h=i&Bt?new k:void 0;for(a.set(t,e),a.set(e,t);++l<s;){var d=t[l],v=e[l];if(o)var y=u?o(v,d,l,e,t,a):o(d,v,l,t,e,a);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!n(e,function(t,e){return h.has(e)||d!==t&&!r(d,t,o,i,a)?void 0:h.add(e)})){p=!1;break}}else if(d!==v&&!r(d,v,o,i,a)){p=!1;break}}return a["delete"](t),a["delete"](e),p}function it(t,e,r,n,o,i,a){switch(r){case ce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case se:return t.byteLength==e.byteLength&&n(new Ge(t),new Ge(e))?!0:!1;case Wt:case Kt:case te:return jt(+t,+e);case Xt:return t.name==e.name&&t.message==e.message;case ne:case ie:return t==e+"";case Qt:var u=c;case oe:var s=i&$t;if(u||(u=l),t.size!=e.size&&!s)return!1;var f=a.get(t);if(f)return f==e;i|=Bt,a.set(t,e);var p=ot(u(t),u(e),n,o,i,a);return a["delete"](t),p;case ae:if(cr)return cr.call(t)==cr.call(e)}return!1}function at(t,e,r,n,o,i){var a=o&$t,u=Ut(t),s=u.length,c=Ut(e),f=c.length;if(s!=f&&!a)return!1;for(var l=s;l--;){var p=u[l];if(!(a?p in e:$e.call(e,p)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var d=!0;i.set(t,e),i.set(e,t);for(var v=a;++l<s;){p=u[l];

var y=t[p],_=e[p];if(n)var g=a?n(_,y,p,e,t,i):n(y,_,p,t,e,i);if(!(void 0===g?y===_||r(y,_,n,o,i):g)){d=!1;break}v||(v="constructor"==p)}if(d&&!v){var m=t.constructor,b=e.constructor;m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(d=!1)}return i["delete"](t),i["delete"](e),d}function ut(t,e){var r=t.__data__;return ht(e)?r["string"==typeof e?"string":"hash"]:r.map}function st(t){for(var e=Ut(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,yt(o)]}return e}function ct(t,e){var r=u(t,e);return G(r)?r:void 0}function ft(t,e,r){e=pt(e,t)?[e]:nt(e);for(var n,o=-1,i=e.length;++o<i;){var a=mt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;var i=t?t.length:0;return!!i&&At(i)&&lt(a,i)&&(hr(t)||Ct(t))}function lt(t,e){return e=null==e?Jt:e,!!e&&("number"==typeof t||Se.test(t))&&t>-1&&t%1==0&&e>t}function pt(t,e){if(hr(t))return!1;var r=typeof t;return"number"==r||"symbol"==r||"boolean"==r||null==t||Dt(t)?!0:be.test(t)||!me.test(t)||null!=e&&t in Object(e)}function ht(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function dt(t){return!!qe&&qe in t}function vt(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||Ie;return t===r}function yt(t){return t===t&&!kt(t)}function _t(t,e){return function(r){return null==r?!1:r[t]===e&&(void 0!==e||t in Object(r))}}function gt(t,e){return 1==e.length?t:q(t,et(e,0,-1))}function mt(t){if("string"==typeof t||Dt(t))return t;var e=t+"";return"0"==e&&1/t==-Vt?"-0":e}function bt(t){if(null!=t){try{return Be.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function wt(t){var e=t?t.length:0;return e?t[e-1]:void 0}function xt(t,e){var r=[];if(!t||!t.length)return r;var n=-1,o=[],i=t.length;for(e=K(e,3);++n<i;){var a=t[n];e(a,n,t)&&(r.push(a),o.push(n))}return tt(t,o),r}function Et(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(zt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Et.Cache||j),r}function jt(t,e){return t===e||t!==t&&e!==e}function Ct(t){return Lt(t)&&$e.call(t,"callee")&&(!We.call(t,"callee")||Ve.call(t)==Ht)}function St(t){return null!=t&&At(t.length)&&!Ot(t)}function Lt(t){return Tt(t)&&St(t)}function Ot(t){var e=kt(t)?Ve.call(t):"";return e==Yt||e==Zt}function At(t){return"number"==typeof t&&t>-1&&t%1==0&&Jt>=t}function kt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Tt(t){return!!t&&"object"==typeof t}function Dt(t){return"symbol"==typeof t||Tt(t)&&Ve.call(t)==ae}function Mt(t){return null==t?"":rt(t)}function Pt(t,e,r){var n=null==t?void 0:q(t,e);return void 0===n?r:n}function Nt(t,e){return null!=t&&ft(t,e,$)}function Ut(t){return St(t)?I(t):X(t)}function Rt(t){return t}function Ft(t){return pt(t)?o(mt(t)):Q(t)}var It=200,zt="Expected a function",qt="__lodash_hash_undefined__",Bt=1,$t=2,Vt=1/0,Jt=9007199254740991,Ht="[object Arguments]",Gt="[object Array]",Wt="[object Boolean]",Kt="[object Date]",Xt="[object Error]",Yt="[object Function]",Zt="[object GeneratorFunction]",Qt="[object Map]",te="[object Number]",ee="[object Object]",re="[object Promise]",ne="[object RegExp]",oe="[object Set]",ie="[object String]",ae="[object Symbol]",ue="[object WeakMap]",se="[object ArrayBuffer]",ce="[object DataView]",fe="[object Float32Array]",le="[object Float64Array]",pe="[object Int8Array]",he="[object Int16Array]",de="[object Int32Array]",ve="[object Uint8Array]",ye="[object Uint8ClampedArray]",_e="[object Uint16Array]",ge="[object Uint32Array]",me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,we=/^\./,xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ee=/[\\^$.*+?()[\]{}|]/g,je=/\\(\\)?/g,Ce=/^\[object .+?Constructor\]$/,Se=/^(?:0|[1-9]\d*)$/,Le={};Le[fe]=Le[le]=Le[pe]=Le[he]=Le[de]=Le[ve]=Le[ye]=Le[_e]=Le[ge]=!0,Le[Ht]=Le[Gt]=Le[se]=Le[Wt]=Le[ce]=Le[Kt]=Le[Xt]=Le[Yt]=Le[Qt]=Le[te]=Le[ee]=Le[ne]=Le[oe]=Le[ie]=Le[ue]=!1;var Oe="object"==typeof t&&t&&t.Object===Object&&t,Ae="object"==typeof self&&self&&self.Object===Object&&self,ke=Oe||Ae||Function("return this")(),Te="object"==typeof r&&r&&!r.nodeType&&r,De=Te&&"object"==typeof e&&e&&!e.nodeType&&e,Me=De&&De.exports===Te,Pe=Me&&Oe.process,Ne=function(){try{return Pe&&Pe.binding("util")}catch(t){}}(),Ue=Ne&&Ne.isTypedArray,Re=Array.prototype,Fe=Function.prototype,Ie=Object.prototype,ze=ke["__core-js_shared__"],qe=function(){var t=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Be=Fe.toString,$e=Ie.hasOwnProperty,Ve=Ie.toString,Je=RegExp("^"+Be.call($e).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=ke.Symbol,Ge=ke.Uint8Array,We=Ie.propertyIsEnumerable,Ke=Re.splice,Xe=f(Object.keys,Object),Ye=ct(ke,"DataView"),Ze=ct(ke,"Map"),Qe=ct(ke,"Promise"),tr=ct(ke,"Set"),er=ct(ke,"WeakMap"),rr=ct(Object,"create"),nr=bt(Ye),or=bt(Ze),ir=bt(Qe),ar=bt(tr),ur=bt(er),sr=He?He.prototype:void 0,cr=sr?sr.valueOf:void 0,fr=sr?sr.toString:void 0;p.prototype.clear=h,p.prototype["delete"]=d,p.prototype.get=v,p.prototype.has=y,p.prototype.set=_,g.prototype.clear=m,g.prototype["delete"]=b,g.prototype.get=w,g.prototype.has=x,g.prototype.set=E,j.prototype.clear=C,j.prototype["delete"]=S,j.prototype.get=L,j.prototype.has=O,j.prototype.set=A,k.prototype.add=k.prototype.push=T,k.prototype.has=D,M.prototype.clear=P,M.prototype["delete"]=N,M.prototype.get=U,M.prototype.has=R,M.prototype.set=F;var lr=B;(Ye&&lr(new Ye(new ArrayBuffer(1)))!=ce||Ze&&lr(new Ze)!=Qt||Qe&&lr(Qe.resolve())!=re||tr&&lr(new tr)!=oe||er&&lr(new er)!=ue)&&(lr=function(t){var e=Ve.call(t),r=e==ee?t.constructor:void 0,n=r?bt(r):void 0;if(n)switch(n){case nr:return ce;case or:return Qt;case ir:return re;case ar:return oe;case ur:return ue}return e});var pr=Et(function(t){t=Mt(t);var e=[];return we.test(t)&&e.push(""),t.replace(xe,function(t,r,n,o){e.push(n?o.replace(je,"$1"):r||t)}),e});Et.Cache=j;var hr=Array.isArray,dr=Ue?a(Ue):W;e.exports=xt}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e){"use strict";function r(t){for(var e in t)"function"==typeof t[e]&&0===e.indexOf("_on")&&(t[e]=t[e].bind(t))}var n=t("events").EventEmitter,o=function(t,e){e=e||{},this._currentPixel=void 0,this._pixelSize=e.pixelSize||1,this._color=e.color||"black",this._canvasEl=t,this._pixels={},this._collection=[],this._ev=new n,r(this)};o.prototype._bres=function(t,e){var r,n=[],o=t.x<e.x,i=o?t.x:e.x,a=o?t.y:e.y,u=o?e.x:t.x,s=o?e.y:t.y,c=s>a?1:-1;if(i===u){for(r=a;r!==s+c;r+=c)n.push({x:i,y:r});return n}r=a;for(var f=0,l=Math.abs((s-a)/(u-i)),p=u>i?1:-1,h=i;h!==u+p;h+=p){n.push({x:h,y:r}),f+=l;for(var d=h,v=r;Math.abs(f)>.5&&r!==s;)(d!==h||v!==r)&&(n.push({x:h,y:r}),d=h,v=r),r+=c,f-=1}return n},o.prototype._clearCanvas=function(){var t=this._canvasEl,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)},o._copyPixels=function(t){var e={};for(var r in t){r=parseInt(""+r),e[r]={};for(var n in t[r])n=parseInt(""+n),e[r][n]=t[r][n]}return e},o.prototype._getCoordFromEvent=function(t){var e=this._canvasEl.getBoundingClientRect();return t=t.touches?t.touches[0]:t,{x:t.clientX-e.left,y:t.clientY-e.top}},o.prototype._getPixelFromEvent=function(t){var e=this._getCoordFromEvent(t);return{x:Math.floor(e.x/this._pixelSize),y:Math.floor(e.y/this._pixelSize)}},o.prototype._renderPixel=function(t){var e=this._pixels[t.x][t.y],r=this._canvasEl.getContext("2d");r.fillStyle=e,r.fillRect(this._pixelSize*t.x,this._pixelSize*t.y,this._pixelSize,this._pixelSize)},o.prototype._drawPixel=function(t){t.x*this._pixelSize>=this._canvasEl.width||t.y*this._pixelSize>=this._canvasEl.height||(this._pixels[t.x]||(this._pixels[t.x]={}),this._pixels[t.x][t.y]=this._color,this._renderPixel(t))},o.prototype._redraw=function(){this._clearCanvas();for(var t in this._pixels)for(var e in this._pixels[t])this._renderPixel({x:t,y:e})},o.prototype._onDown=function(t){this._active||(t.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("keydown",this._onKeyDown)),this._active=!1,this._currentPixel=this._getPixelFromEvent(t),this._drawPixel(this._currentPixel))},o.prototype._onKeyDown=function(t){27===t.keyCode&&(this._active=!1,this.clear())},o.prototype._onMove=function(t){this._active||(this._active=!0);var e=this._getPixelFromEvent(t),r=this._currentPixel;this._collection.push(e);for(var n=this._bres(e,r),o=0;o<n.length;o++)this._drawPixel(n[o]);this._currentPixel=e,t.preventDefault()},o.prototype._onTouchEnd=function(){this._onUp(),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd)},o.prototype._onMouseUp=function(){this._onUp(),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("keydown",this._onKeyDown)},o.prototype._onUp=function(){this._active&&(this._active=!1,this.fire("result",{result:this.getCollection()}),this._collection=[])},o.prototype.loadPixels=function(t){this._pixels=o._copyPixels(t),this._redraw()},o.prototype.getPixels=function(){return o._copyPixels(this._pixels)},o.prototype.getCollection=function(){return this._collection},o.prototype.clear=function(){return this._clearCanvas(),this._pixels={},this},o.prototype.enable=function(){return this._canvasEl.addEventListener("mousedown",this._onDown),this._canvasEl.addEventListener("touchstart",this._onDown),this},o.prototype.disable=function(){return this._canvasEl.removeEventListener("mousedown",this._onDown),this._canvasEl.removeEventListener("touchstart",this._onDown),this},o.prototype.setColor=function(t){this._color=t},o.prototype.setPixelSize=function(t){this._pixelSize=t,this._redraw()},o.prototype.on=function(t,e){return this._ev.on(t,e),this},o.prototype.fire=function(t,e){return this._ev.emit(t,e),this},o.prototype.off=function(t,e){return this._ev.removeListener(t,e),this},"undefined"!=typeof e&&e.exports?e.exports=o:window.Pencil=o},{events:12}],6:[function(t,e){!function(t,r){"undefined"!=typeof e?r(e.exports):"function"==typeof define&&"object"==typeof define.amd?define(function(){var t={};return r(t),t}):r(this[t]={})}("rainbow",function(t){t.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,n){return e+e+r+r+n+n}));return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null},t.rgbToHex=function(t){return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1)},t.range=function(e,r,n){function o(r){for(var n=[],o=0;r>o;o++){var a=[e[0]-Math.floor(i[0]/(r-1)*o),e[1]-Math.floor(i[1]/(r-1)*o),e[2]-Math.floor(i[2]/(r-1)*o)];n.push(t.rgbToHex(a))}return n}"string"==typeof e&&(e=t.hexToRgb(e)),"string"==typeof r&&(r=t.hexToRgb(r));var i=[e[0]-r[0],e[1]-r[1],e[2]-r[2]];return n?o(n):o}})},{}],7:[function(t,e){!function(){"use strict";function t(t,e){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n}function r(t,e,r){var n=e.x,o=e.y,i=r.x-n,a=r.y-o;if(0!==i||0!==a){var u=((t.x-n)*i+(t.y-o)*a)/(i*i+a*a);u>1?(n=r.x,o=r.y):u>0&&(n+=i*u,o+=a*u)}return i=t.x-n,a=t.y-o,i*i+a*a}function n(e,r){for(var n,o=e[0],i=[o],a=1,u=e.length;u>a;a++)n=e[a],t(n,o)>r&&(i.push(n),o=n);return o!==n&&i.push(n),i}function o(t,e){var n,o,i,a,u=t.length,s="undefined"!=typeof Uint8Array?Uint8Array:Array,c=new s(u),f=0,l=u-1,p=[],h=[];for(c[f]=c[l]=1;l;){for(o=0,n=f+1;l>n;n++)i=r(t[n],t[f],t[l]),i>o&&(a=n,o=i);o>e&&(c[a]=1,p.push(f,a,a,l)),l=p.pop(),f=p.pop()}for(n=0;u>n;n++)c[n]&&h.push(t[n]);return h}function i(t,e,r){var i=void 0!==e?e*e:1;return t=r?t:n(t,i),t=o(t,i)}"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof e?e.exports=i:"undefined"!=typeof self?self.simplify=i:window.simplify=i}()},{}],8:[function(t,e){e.exports=function(t){return{type:"FeatureCollection",features:t}}},{}],9:[function(t,e){function r(t,e){for(var r=!1,n=0,o=e.length-1;n<e.length;o=n++){var i=e[n][0],a=e[n][1],u=e[o][0],s=e[o][1],c=a>t[1]!=s>t[1]&&t[0]<(u-i)*(t[1]-a)/(s-a)+i;c&&(r=!r)}return r}e.exports=function(t,e){var n=e.geometry.coordinates,o=[t.geometry.coordinates[0],t.geometry.coordinates[1]];"Polygon"===e.geometry.type&&(n=[n]);for(var i=!1,a=0;a<n.length&&!i;){if(r(o,n[a][0])){for(var u=!1,s=1;s<n[a].length&&!u;)r(o,n[a][s])&&(u=!0),s++;u||(i=!0)}a++}return i}},{}],10:[function(t,e){function r(t,e){return{type:"Feature",geometry:t,properties:e}}var n=t("simplify-js");e.exports=function(t,e,o){if("LineString"===t.geometry.type){var i={type:"LineString",coordinates:[]},a=t.geometry.coordinates.map(function(t){return{x:t[0],y:t[1]}});return i.coordinates=n(a,e,o).map(function(t){return[t.x,t.y]}),r(i,t.properties)}if("Polygon"===t.geometry.type){var u={type:"Polygon",coordinates:[]};return t.geometry.coordinates.forEach(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}}),i=n(r,e,o).map(function(t){return[t.x,t.y]});u.coordinates.push(i)}),r(u,t.properties)}}},{"simplify-js":7}],11:[function(t,e){var r=t("turf-inside"),n=t("turf-featurecollection");e.exports=function(t,e){for(var o=n([]),i=0;i<e.features.length;i++)for(var a=0;a<t.features.length;a++){var u=r(t.features[a],e.features[i]);u&&o.features.push(t.features[a])}return o}},{"turf-featurecollection":8,"turf-inside":9}],12:[function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,o,u,s,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(r=this._events[t],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(i(r))for(u=Array.prototype.slice.call(arguments,1),c=r.slice(),o=c.length,s=0;o>s;s++)c[s].apply(this,u);return!0},r.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),o||(o=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var o=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,o,a,u;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(u=a;u-->0;)if(r[u]===e||r[u].listener&&r[u].listener===e){o=u;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}]},{},[1]);